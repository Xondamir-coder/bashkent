import{_ as x}from"./D87GEH1N.js";import{R as C,U as h,S as w,W as s,X as y,m as c,x as B,i as u,Z as P,o as $,T as A}from"./B_ExSOLx.js";import"./D-8KhRck.js";import"./DKtf60Sy.js";const U={__name:"[id]",async setup(M){let l,a;const{activeBuilding:o,activeFloor:t,buildings:n,fetchBuildings:r}=C(),_=h(),d=w(),i=new Date(Date.now()+365*24*60*60*1e3),m=s("building_id",{expires:i}),p=s("block_id",{expires:i}),f=s("floor_id",{expires:i});n.value||([l,a]=y(()=>r()),await l,a()),o.value||(o.value=n.value.find(e=>e.id===+_.params.id));const v=c(()=>o.value?.blocks.flatMap(e=>e.floors)),g=c(()=>`${P}/${o.value?.image}`),b=e=>{t.value=e,console.log(t.value),m.value=e.building_id,p.value=e.block_id,f.value=e.id,A({path:d(`/floors/${e.id}`),query:{building_id:e.building_id,block_id:e.block_id}})};return(e,R)=>{const k=x;return $(),B(k,{paths:u(v),image:u(g),onSelectPath:b},null,8,["paths","image"])}}};export{U as default};
